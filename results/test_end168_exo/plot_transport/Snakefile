from snakemake.remote.HTTP import RemoteProvider as HTTPRemoteProvider


configfile: "../config/config.yaml"


wildcard_constraints:
    simpl="[a-zA-Z0-9]*",
    clusters="[0-9]+m?|all",
    ll="(v|c)([0-9\.]+|opt)",
    opts="[-+a-zA-Z0-9\.]*",
    sector_opts="[-+a-zA-Z0-9\.\s]*",


rule all:
    input:
        expand("../postnetworks/elec_s{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.nc",**config['scenario']),
        "results/vehiclenb.png",
        expand('results/EV_balance{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),
        expand('results/EV_soc_1year{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),
        expand('results/EV_soc_1day{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),
        expand('results/transport_balance_1year{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),
        expand('results/transport_balance_period{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),
        expand('results/transport_balance_and_load{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',**config['scenario']),

	
rule plots_together:
    input:    	
        network = expand("../postnetworks/elec_s{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.nc",**config['scenario'])
    output:
        vehiclenb = "results/vehiclenb.png",
    script: "make_plots_summary.py" 
        
rule plots_individual:
    input:
        network = "../postnetworks/elec_s{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.nc",
    output:
        EV_balance = 'results/EV_balance{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
        EV_soc_1year = 'results/EV_soc_1year{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
        EV_soc_1day = 'results/EV_soc_1day{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
        transport_balance_1year = 'results/transport_balance_1year{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
        transport_balance_period = 'results/transport_balance_period{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
        transport_balance_and_load = 'results/transport_balance_and_load{simpl}_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}.png',
    script: "make_plots.py" 
